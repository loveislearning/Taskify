<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taskify - Collaborative Project</title>
    <style>
        :root {
            --primary-bg: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            --card-bg: rgba(255, 255, 255, 0.08);
            --glass-blur: blur(12px);
            --accent-color: #00e1ff;
            --accent-gradient: linear-gradient(135deg, #00b4d8 0%, #00e1ff 100%);
            --text-primary: rgba(255, 255, 255, 0.95);
            --text-secondary: rgba(255, 255, 255, 0.7);
            --border-color: rgba(255, 255, 255, 0.12);
            --success-color: #4caf50;
            --online-color: #00ff88;
            --offline-color: #ff4444;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: var(--primary-bg);
            color: var(--text-primary);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
        }
        .collaborative-workspace {
            max-width: 1400px;
            margin: 2rem auto;
            background: var(--card-bg);
            border-radius: 1.5rem;
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }
        .project-header {
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border-color);
        }
        .project-header h2 {
            font-size: 1.75rem;
            font-weight: 600;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        #invite-btn {
            background: var(--accent-gradient);
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 500;
            transition: var(--transition);
            border: none;
            color: #fff;
            cursor: pointer;
        }
        #invite-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 225, 255, 0.3);
        }
        .workspace-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 0;
            min-height: 80vh;
        }
        @media (max-width: 1024px) {
            .workspace-container {
                grid-template-columns: 1fr;
            }
        }
        .tasks-section {
            padding: 2rem;
            border-right: 1px solid var(--border-color);
        }
        .section-header {
            margin-bottom: 1.5rem;
        }
        .task-count {
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        .task-list {
            display: grid;
            gap: 1rem;
        }
        .task-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        .task-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }
        .task-item.completed {
            opacity: 0.6;
            background: rgba(0, 255, 136, 0.05);
        }
        .task-actions {
            display: flex;
            gap: 0.5rem;
        }
        .task-actions button {
            background: none;
            border: none;
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1em;
        }
        .task-actions button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .right-sidebar {
            padding: 2rem;
            background: rgba(0, 0, 0, 0.15);
        }
        .team-members ul {
            display: grid;
            gap: 1rem;
        }
        .member {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            transition: var(--transition);
        }
        .member:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        .member-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: grid;
            place-items: center;
            font-weight: 600;
            margin-right: 1rem;
            color: #fff;
        }
        .member-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: auto;
        }
        .member-status.online {
            background: var(--online-color);
        }
        .member-status.offline {
            background: var(--offline-color);
        }
        .team-chat {
            display: flex;
            flex-direction: column;
            height: 60vh;
            margin-top: 2rem;
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding-right: 0.5rem;
            display: grid;
            gap: 1rem;
        }
        .chat-message {
            max-width: 80%;
            padding: 1rem;
            border-radius: 1rem;
            position: relative;
            animation: messageAppear 0.3s ease-out;
            word-break: break-word;
        }
        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: none; }
        }
        .chat-message.outgoing {
            background: var(--accent-gradient);
            margin-left: auto;
            border-bottom-right-radius: 4px;
            color: #fff;
        }
        .chat-message.incoming {
            background: rgba(255, 255, 255, 0.08);
            border-bottom-left-radius: 4px;
            color: var(--text-primary);
        }
        .message-time {
            font-size: 0.8em;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            display: block;
            text-align: right;
        }
        .add-task {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .add-task input,
        .chat-input input {
            flex: 1;
            padding: 0.875rem;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            transition: var(--transition);
        }
        .add-task input:focus,
        .chat-input input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(0, 225, 255, 0.1);
        }
        .chat-input {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-top: 1rem;
        }
        #attach-btn,
        #emoji-btn,
        #send-message-btn {
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            color: var(--accent-color);
            transition: var(--transition);
            border-radius: 0.5rem;
            padding: 0.5rem;
        }
        #attach-btn:hover,
        #emoji-btn:hover,
        #send-message-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        #emoji-picker {
            display: none;
            position: absolute;
            bottom: 50px;
            right: 80px;
            background: #222;
            border-radius: 6px;
            padding: 10px;
            z-index: 10;
        }
        .emoji-option {
            font-size: 1.4em;
            cursor: pointer;
            margin: 0 4px;
        }
        .emoji-option:hover {
            filter: brightness(1.5);
        }
        @media (max-width: 768px) {
            .workspace-container {
                grid-template-columns: 1fr;
            }
            .tasks-section {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }
            .right-sidebar {
                border-left: none;
            }
            .task-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        .collaborative-notification {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="collaborative-workspace">
        <div class="project-header">
            <h2>📋 Collaborative Project: Team Study</h2>
            <button id="invite-btn">Invite Members</button>
        </div>
        <div class="workspace-container">
            <div class="tasks-section">
                <div class="section-header">
                    <h3>Team Tasks</h3>
                    <span class="task-count">0 completed / 0 total</span>
                </div>
                <div class="task-list" id="task-list"></div>
                <div class="add-task">
                    <input type="text" id="new-task-input" placeholder="Add a new task...">
                    <button id="add-task-btn">Add Task</button>
                </div>
            </div>
            <div class="right-sidebar">
                <div class="team-members">
                    <h3>Team Members</h3>
                    <ul id="member-list"></ul>
                </div>
                <div class="team-chat">
                    <h3>Team Chat</h3>
                    <div class="chat-messages" id="chat-messages"></div>
                    <div class="chat-input" style="position:relative;">
                        <input type="file" id="chat-file-input" style="display:none;"
                            accept="image/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar">
                        <button id="attach-btn" title="Attach file">📎</button>
                        <button id="emoji-btn" title="Add emoji">😊</button>
                        <div id="emoji-picker" style="display:none; position:absolute; bottom:50px; right:80px; background:#222; border-radius:6px; padding:10px; z-index:10;">
                            <span class="emoji-option">😀</span>
                            <span class="emoji-option">😂</span>
                            <span class="emoji-option">😍</span>
                            <span class="emoji-option">👍</span>
                            <span class="emoji-option">🎉</span>
                            <span class="emoji-option">😎</span>
                            <span class="emoji-option">🙏</span>
                        </div>
                        <input type="text" id="chat-input" placeholder="Type a message...">
                        <button id="send-message-btn">Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Sample data
            const members = [
                { id: 1, name: 'Alice Johnson', online: true },
                { id: 2, name: 'Bob Smith', online: false },
                { id: 3, name: 'Charlie Davis', online: true },
                { id: 4, name: 'Dana Wilson', online: true }
            ];
            const tasks = [
                { id: 1, text: 'Prepare research outline', assignedTo: 1, completed: false },
                { id: 2, text: 'Collect references for literature review', assignedTo: 2, completed: true },
                { id: 3, text: 'Create presentation slides', assignedTo: 3, completed: false },
                { id: 4, text: 'Schedule team meeting', assignedTo: 4, completed: false }
            ];
            const messages = [
                { sender: 'Alice Johnson', text: 'Has everyone started on their assigned tasks?', time: '9:30 AM', outgoing: false },
                { sender: 'Charlie Davis', text: "I've begun working on the slides. Will share a draft by tomorrow.", time: '9:32 AM', outgoing: false },
                { sender: 'You', text: "I've completed the reference list. Will upload it to our shared folder.", time: '9:35 AM', outgoing: true }
            ];
            // DOM Elements
            const taskList = document.getElementById('task-list');
            const memberList = document.getElementById('member-list');
            const chatMessages = document.getElementById('chat-messages');
            const newTaskInput = document.getElementById('new-task-input');
            const addTaskBtn = document.getElementById('add-task-btn');
            const chatInput = document.getElementById('chat-input');
            const sendMessageBtn = document.getElementById('send-message-btn');
            const taskCount = document.querySelector('.task-count');
            const inviteBtn = document.getElementById('invite-btn');
            const attachBtn = document.getElementById('attach-btn');
            const fileInput = document.getElementById('chat-file-input');
            attachBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', function () {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    const now = new Date();
                    const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    let fileMessage = {
                        sender: 'You',
                        time: timeStr,
                        outgoing: true,
                        isAttachment: true,
                        fileName: file.name,
                        fileType: file.type,
                        fileURL: URL.createObjectURL(file)
                    };
                    messages.push(fileMessage);
                    renderMessages();
                    fileInput.value = '';
                }
            });
            // Emoji Picker Logic
            const emojiBtn = document.getElementById('emoji-btn');
            const emojiPicker = document.getElementById('emoji-picker');
            emojiBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                emojiPicker.style.display = emojiPicker.style.display === 'none' ? 'block' : 'none';
            });
            document.addEventListener('click', () => emojiPicker.style.display = 'none');
            emojiPicker.querySelectorAll('.emoji-option').forEach(emoji => {
                emoji.addEventListener('click', () => {
                    chatInput.value += emoji.textContent;
                    emojiPicker.style.display = 'none';
                    chatInput.focus();
                });
            });
            // Render initial data
            renderTasks();
            renderMembers();
            renderMessages();
            // Update task count
            updateTaskCount();
            // Event Listeners
            addTaskBtn.addEventListener('click', addNewTask);
            sendMessageBtn.addEventListener('click', sendMessage);
            inviteBtn.addEventListener('click', inviteMembers);
            newTaskInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') addNewTask();
            });
            chatInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') sendMessage();
            });
            // Functions
            function renderTasks() {
                taskList.innerHTML = '';
                tasks.forEach(task => {
                    const assignedMember = members.find(m => m.id === task.assignedTo);
                    const taskElement = document.createElement('div');
                    taskElement.className = `task-item ${task.completed ? 'completed' : ''}`;
                    taskElement.dataset.id = task.id;
                    taskElement.innerHTML = `
                        <div class="task-content">
                            <div class="task-text">${task.text}</div>
                            <div class="task-assigned">Assigned to: ${assignedMember ? assignedMember.name : 'Unassigned'}</div>
                        </div>
                        <div class="task-actions">
                            <button class="complete-btn" onclick="toggleTaskCompletion(${task.id})">${task.completed ? '↩️' : '✓'}</button>
                            <button class="edit-btn" onclick="editTask(${task.id})">✏️</button>
                            <button class="delete-btn" onclick="deleteTask(${task.id})">🗑️</button>
                        </div>
                    `;
                    taskList.appendChild(taskElement);
                });
            }
            function renderMembers() {
                memberList.innerHTML = '';
                members.forEach(member => {
                    const memberElement = document.createElement('li');
                    memberElement.className = 'member';
                    const initials = member.name.split(' ').map(n => n[0]).join('');
                    memberElement.innerHTML = `
                        <div class="member-avatar">${initials}</div>
                        <div class="member-name">${member.name}</div>
                        <div class="member-status ${member.online ? 'online' : 'offline'}"></div>
                    `;
                    memberList.appendChild(memberElement);
                });
            }
            function renderMessages() {
                chatMessages.innerHTML = '';
                messages.forEach(message => {
                    const member = members.find(m => m.name === message.sender) || { name: message.sender };
                    const initials = member.name.split(' ').map(n => n[0]).join('');
                    const avatarHtml = `<div class="member-avatar" style="width:28px;height:28px;font-size:0.9em;margin-bottom:3px;">${initials}</div>`;
                    const messageElement = document.createElement('div');
                    messageElement.className = `chat-message ${message.outgoing ? 'outgoing' : 'incoming'}`;
                    let content = `
                        <div style="display:flex;align-items:center;gap:8px;">
                            ${!message.outgoing ? avatarHtml : ''}
                            <div>
                                <div class="message-sender">${message.sender}</div>
                                <div class="message-text">`;
                    if (message.isAttachment) {
                        if (message.fileType && message.fileType.startsWith('image/')) {
                            content += `<img src="${message.fileURL}" alt="${message.fileName}" style="max-width:120px;max-height:80px;border-radius:4px;display:block;margin-bottom:5px;"><br>`;
                        }
                        content += `<a href="${message.fileURL}" download="${message.fileName}" style="color:var(--accent-color);">${message.fileName}</a>`;
                    } else {
                        content += message.text;
                    }
                    content += `</div>
                                <div class="message-time">${message.time}</div>
                            </div>
                        </div>
                    `;
                    messageElement.innerHTML = content;
                    chatMessages.appendChild(messageElement);
                });
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            function addNewTask() {
                const taskText = newTaskInput.value.trim();
                if (taskText) {
                    const newTask = {
                        id: tasks.length + 1,
                        text: taskText,
                        assignedTo: members[Math.floor(Math.random() * members.length)].id,
                        completed: false
                    };
                    tasks.push(newTask);
                    renderTasks();
                    updateTaskCount();
                    newTaskInput.value = '';
                    simulateCollaborativeUpdate(`New task added: "${taskText}"`);
                }
            }
            function sendMessage() {
                const messageText = chatInput.value.trim();
                if (messageText) {
                    const now = new Date();
                    const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    const newMessage = {
                        sender: 'You',
                        text: messageText,
                        time: timeStr,
                        outgoing: true
                    };
                    messages.push(newMessage);
                    renderMessages();
                    chatInput.value = '';
                }
            }
            function updateTaskCount() {
                const completedCount = tasks.filter(task => task.completed).length;
                taskCount.textContent = `${completedCount} completed / ${tasks.length} total`;
            }
            function inviteMembers() {
                const email = prompt('Enter email address to invite:');
                if (email && validateEmail(email)) {
                    alert(`Invitation sent to ${email}`);
                } else if (email) {
                    alert('Please enter a valid email address');
                }
            }
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }
            function simulateCollaborativeUpdate(message) {
                const notification = document.createElement('div');
                notification.className = 'collaborative-notification';
                notification.textContent = message;
                notification.style = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background-color: var(--accent-color);
                    color: white;
                    padding: 10px 15px;
                    border-radius: 4px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                    opacity: 0;
                    transition: opacity 0.3s;
                    z-index: 1000;
                `;
                document.body.appendChild(notification);
                setTimeout(() => notification.style.opacity = '1', 100);
                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
            window.toggleTaskCompletion = function (taskId) {
                const task = tasks.find(t => t.id === taskId);
                if (task) {
                    task.completed = !task.completed;
                    renderTasks();
                    updateTaskCount();
                    simulateCollaborativeUpdate(`Task "${task.text}" marked as ${task.completed ? 'completed' : 'incomplete'}`);
                }
            };
            window.editTask = function (taskId) {
                const task = tasks.find(t => t.id === taskId);
                if (task) {
                    const newText = prompt('Edit task:', task.text);
                    if (newText && newText.trim()) {
                        task.text = newText.trim();
                        renderTasks();
                        simulateCollaborativeUpdate(`Task edited to: "${newText}"`);
                    }
                }
            };
            window.deleteTask = function (taskId) {
                const taskIndex = tasks.findIndex(t => t.id === taskId);
                if (taskIndex !== -1) {
                    const deletedTask = tasks[taskIndex];
                    if (confirm(`Are you sure you want to delete task: "${deletedTask.text}"?`)) {
                        tasks.splice(taskIndex, 1);
                        renderTasks();
                        updateTaskCount();
                        simulateCollaborativeUpdate(`Task deleted: "${deletedTask.text}"`);
                    }
                }
            };
            setInterval(() => {
                if (Math.random() > 0.7) {
                    const randomMemberIndex = Math.floor(Math.random() * members.length);
                    members[randomMemberIndex].online = !members[randomMemberIndex].online;
                    renderMembers();
                }
                if (Math.random() > 0.85) {
                    const onlineMembers = members.filter(m => m.online && m.name !== 'You');
                    if (onlineMembers.length > 0) {
                        const randomMember = onlineMembers[Math.floor(Math.random() * onlineMembers.length)];
                        const now = new Date();
                        const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                        const messageOptions = [
                            "How's everyone's progress so far?",
                            "I just finished my part of the project.",
                            "Can someone help me with this section?",
                            "When is our next meeting?",
                            "I've shared some resources in our folder."
                        ];
                        const randomMessage = messageOptions[Math.floor(Math.random() * messageOptions.length)];
                        messages.push({
                            sender: randomMember.name,
                            text: randomMessage,
                            time: timeStr,
                            outgoing: false
                        });
                        renderMessages();
                    }
                }
            }, 10000);
        });
    </script>
</body>
</html>
